---
import Link from "@/components/ui/Link.astro";
import { redirectUri } from "@/constants";

const { PUBLIC_SPOTIFY_CLIENT_ID } = import.meta.env;

const spotifyQueryParams = new URLSearchParams({
  client_id: PUBLIC_SPOTIFY_CLIENT_ID,
  response_type: "code",
  redirect_uri: redirectUri,
  scope: "user-top-read",
});

const spotifyLoginUrl = `https://accounts.spotify.com/authorize?${spotifyQueryParams.toString()}`;

interface Props {
  class?: string;
}
const { class: _class } = Astro.props;
---

<Link class:list={[_class]} href={spotifyLoginUrl}>
  <slot />
</Link>
